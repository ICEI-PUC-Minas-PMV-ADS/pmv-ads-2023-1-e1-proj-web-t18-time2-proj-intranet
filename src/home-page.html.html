<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Intranet Corporativa - Home Page</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="login.js"></script>
    <script>
        if (!usuarioCorrente.login) {
            window.location.href = LOGIN_URL;
        }

        function exibeUsuarios() {
            let Listausuarios = '';
            for (i - 0; i < db_usuarios.usuarios.legth; i++) {
                let usuarioo = db_usuarios.usuarios[i];
                Listausuarios += `<tr><td scope="row">${usuario.nome}</td><td>${usuario.login}</td><td>${usuario.email}</td></tr>`;
            }

            document.getElementById("table-usuarios").innerHTML = Listausuarios
        }

        function initPage() {
            document.getElementById('btn_logout').addEventListener('click', logoutUser);

            document.getElementById('nomeUsuario').innerHTML = usuarioCorrente.nome;

            exibeUsuarios();
        }

        window.addEventListener('load', initPage);
    </script>
</head>

<body>
    <header>
        <div class="logo-container">
            <img src="logo.png" alt="Logo da empresa" height="100">
        </div>
        <h1>Bem-vindo à Intranet Corporativa</h1>

        <div class="date">
            <script>document.write(new Date().toLocaleDateString());</script>
        </div>

    </header>
    <nav>
        <ul>
            <li><a href="home-page.html.html">Início</a></li>
            <li><a href="gestao-de-pessoas.html">Gestão de Pessoas</a></li>
            <li><a href="financeiro.html">Financeiro</a></li>
            <li><a href="marketing.html">Marketing</a></li>
            <li><a href="download.html">Downloads</a></li>
            <li><a href="contatos.html">Contatos</a></li>
            <li><a href="configuracoes.html">Configurações</a></li>
        </ul>
    </nav>
    <main>
        <h1>Notícias e avisos</h1>
        <p>Aqui você encontrará as últimas notícias e atualizações da empresa.</p>


        <section>

            <ul>
                <h1>Últimas notícias</h1>

                <div id="dados-container"></div>

                <button id="botao-adicionar">Adicionar nova notícia</button>

                <div id="modal-form" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2 id="modal-title">Nova notícia</h2>
                        <form id="formulario">
                            <label for="titulo">Título:</label> <br>
                            <input type="text" id="titulo" required>
                            <BR></BR>
                            <label for="descricao">Descrição:</label> <br>
                            <textarea id="descricao" required></textarea>
                            <br>
                            <br>
                            <button type="submit">Salvar</button>
                        </form>
                    </div>
                </div>

            </ul>

            <ul>
                <li>
                    <h4>Lembretes</h4>
                </li>

                <li>
                    <h4>Atenção aos prazos</h4>
                    <p>Confirta os prazos de envio dos relatórios</p>
                    <p><a href="#">Leia mais</a></p>
                </li>
                <li>
                    <h4>Banco de horas</h4>
                    <p>Manter o registro de ponto</p>
                    <p><a href="#">Leia mais</a></p>
                </li>
                <li>
                    <h4>Como utilizar a intranet?</h4>
                    <p>Confirta todas as funcionalidades</p>
                    <p><a href="#">Leia mais</a></p>
                </li>
            </ul>
        </section>

        <section>


            <h1>Calendário</h1>
        </section>
        <iframe src="https://calendar.google.com/calendar/embed?src=seu-email%40gmail.com&ctz=America%2FSao_Paulo"
            style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>


    </main>





    <script src="base.js"></script>
    <script>
        var botaoAdicionar = document.getElementById("botao-adicionar");
        var modalForm = document.getElementById("modal-form");
        var closeModal = document.getElementsByClassName("close")[0];
        var formulario = document.getElementById("formulario");
        var modalTitle = document.getElementById("modal-title");

        var editarIndex = null; // Índice da informação a ser editada

        botaoAdicionar.addEventListener("click", function () {
            modalTitle.textContent = "Nova Notícia";
            modalForm.style.display = "block";
            editarIndex = null;
            formulario.reset();
        });

        closeModal.addEventListener("click", function () {
            modalForm.style.display = "none";
            formulario.reset();
        });

        window.addEventListener("click", function (event) {
            if (event.target == modalForm) {
                modalForm.style.display = "none";
                formulario.reset();
            }
        });

        formulario.addEventListener("submit", function (event) {
            event.preventDefault();

            var titulo = document.getElementById("titulo").value;
            var descricao = document.getElementById("descricao").value;

            if (editarIndex !== null) {
                // Editar informação existente
                db.dados[editarIndex].titulo = titulo;
                db.dados[editarIndex].descricao = descricao;
            } else {
                // Adicionar nova informação
                var novaInformacao = {
                    titulo: titulo,
                    descricao: descricao
                };

                db.dados.push(novaInformacao);
            }

            exibirDados();

            modalForm.style.display = "none";
            formulario.reset();
            editarIndex = null;
        });

        function exibirDados() {
            var dadosContainer = document.getElementById("dados-container");
            dadosContainer.innerHTML = "";

            for (var i = 0; i < db.dados.length; i++) {
                var titulo = db.dados[i].titulo;
                var descricao = db.dados[i].descricao;

                var elementoTitulo = document.createElement("h2");
                elementoTitulo.textContent = titulo;

                var elementoDescricao = document.createElement("p");
                elementoDescricao.textContent = descricao;

                var btnExcluir = document.createElement("button");
                btnExcluir.textContent = "Excluir";
                btnExcluir.dataset.index = i;
                btnExcluir.addEventListener("click", excluirInformacao);

                var btnEditar = document.createElement("button");
                btnEditar.textContent = "Editar";
                btnEditar.dataset.index = i;
                btnEditar.addEventListener("click", editarInformacao);

                var hr = document.createElement("hr");

                dadosContainer.appendChild(elementoTitulo);
                dadosContainer.appendChild(elementoDescricao);
                dadosContainer.appendChild(btnExcluir);
                dadosContainer.appendChild(btnEditar);
                dadosContainer.appendChild(hr);
            }
        }

        function excluirInformacao(event) {
            var index = event.target.dataset.index;
            db.dados.splice(index, 1);
            exibirDados();
        }

        function editarInformacao(event) {
            var index = event.target.dataset.index;
            var informacao = db.dados[index];

            document.getElementById("titulo").value = informacao.titulo;
            document.getElementById("descricao").value = informacao.descricao;

            modalTitle.textContent = "Editar Registro";
            modalForm.style.display = "block";
            editarIndex = index;
        }

        exibirDados();
    </script>

    <footer>
        <p>&copy; 2023 - Todos os direitos reservados.</p>
    </footer>
</body>

</html>